#!/usr/bin/env ruby
require 'thor'
$:.push File.join(File.expand_path(File.dirname(__FILE__)), '..', 'lib')
require 'scrunch'

class ScrunchCommand < Thor
  desc "crunch -f FILENAME", "crunch a log file"
  method_options %w(file -f) => :string, required: true
  def crunch
    puts 'Use -f to pass a file, eg: scrunch -f path/to/combatlog.txt' and return if options[:file].nil? #TODO use stderr
    cruncher = Scrunch::Cruncher.new options[:file]
    cruncher.run
  end

  default_task :crunch
end

ScrunchCommand.start
